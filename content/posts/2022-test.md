---
publishedOn: 2022-08-17T08:17:55.212Z
title: How to transfer tokens between accounts in Solana smart contract ? - Part 1
subTitle: Understand how spl-tokens are transferred between accounts in solana
  using anchor frameowork
featured: false
heroImg: /img/content/posts/solanalogo.png
slug: how-transfer-of-tokens-occur-on-solana
tags:
  - blockchain
  - meta-blocks
  - metaplex
  - nft
relatedSlugs:
  - how-to-make-upgradeable-nfts
  - mint-nft-candy-machine-v2
author: srinivasvalekar
---
Let us walk through on how to transfer tokens in Solana using **Anchor framework**.

## Prerequisites

This guide requires you to have following installed

* Rust CLI - Following this [link](https://www.rust-lang.org/tools/install) for installing in your machine
* You should have installed `Solana` in your machine - Please follow this [link](https://docs.solana.com/cli/install-solana-cli-tools)
* Last but not the least - you should have installed **Anchor Framework**  - Please follow this [link](https://book.anchor-lang.com/getting_started/installation.html#anchor)
* Typescript on the client side. (**Anchor Framework** generates a client code as well)

## Outcome

By the end of this guide, you should be able to understand how tokens could be transferred in **anchor framework**. Please refer this [github link](https://github.com/metablockshq/metablocks-program-library/blob/main/nft-vault/programs/nft-vault/src/lib.rs) to dive directly into the code.


## Understanding about SPL-Tokens

Transfer any spl-tokens to wallet by creating an **associated token account ATA**. It involves two simple process, 
* Create a mint (If the mint is not existing)
* Transfer a mint (to an associated token account)


### Create a Mint 
You could think of `mint` as a metadata about a token that is being transferred to an account. A mint could be initialised in a context. In `Anchor Framework` the struct could be passed a context. 

`anchor_spl` needs to be imported into the project. This could be added in `cargo.toml` file.

```toml
anchor-spl = "^0.25.0"
```


In the rust program you do the following to initialise a mint account with the **PDA** generated mint address.

```rust

use anchor_lang::prelude::*;
use anchor_spl::token::{Mint, Token};



#[derive(Accounts)]
pub struct InitMint<'info> {
    #[account(
        init_if_needed,
         seeds = [
            b"Mint".as_ref(),
         ],
        bump,
        payer = payer, // payer is the one who is invoking this context
        mint::authority = payer,
        mint::decimals = 0, // zero decimals for the new mint
        mint::freeze_authority = payer // here freeze authority is the payer
    )]
    pub mint: Box<Account<'info, Mint>>,

}

```

Anchor framework provides with `spl` token implementation of its own. This could be used to `mint` an account.


### Transfer the Minted token

Now that we have a minted an spl-token, it is time to understand about **Associated Token Account (ATA)**

* ATA is normally generated **off-chain**. 
* ATA is **PDA**. ATA is generated by finding a suitable PDA
* On the client side, one could generate a ATA as follows 

The given code is an example ATA generation using **PDA** method in **typescript** on the client side.

```typescript

import {PublicKey} from "@solana/web3.js"
import { ASSOCIATED_TOKEN_PROGRAM_ID, TOKEN_PROGRAM_ID } from "@solana/spl-token";

const AssociatedTokenAccount = async (
  payerKey: PublicKey,
  mintKey: PublicKey
) => {

  return await PublicKey.findProgramAddress(
    [
      payerKey.toBuffer(), // could be any public key
      TOKEN_PROGRAM_ID.toBuffer(),
      mintKey.toBuffer(),
    ],
   ASSOCIATED_TOKEN_PROGRAM_ID  
  );
};

```

ATA is generated using 
* Any **public key**
* A **mint key** 
* Token program ID and Associated Token Program ID. These two are standard programs that are deployed on Solana.

You should pass **ATA** to an instruction to transfer a **mint**. In the program, use either `mint_to` instruction to transfer a newly created **mint**. (We will discuss about the differences between these two in the next guide)

```rust
use anchor_spl::token::{self};

...

let cpi_context = CpiContext::new(
    self.token_program.to_account_info(),
    token::MintTo {
        mint: self.mint.to_account_info(),
        to: self.payer_ata.to_account_info(),
        authority: self.payer.to_account_info(),
    },
);
token::mint_to(cpi_context, 1)
```

With this, the spl-token mint is minted into the payer associated token account. 


## Next Steps

Next we will discuss about difference between `mint_to` and `transfer` instruction from `spl_token` library 

If you are building a richer application, or want NFTs that can upgrade overtime, checkout the [Meta Blocks protocol](https://metablocks.world/guides/protocol).